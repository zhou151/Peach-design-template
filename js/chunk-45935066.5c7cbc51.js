(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45935066"],{"01e6":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("5530"),r={showQuickJumper:!0,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")}};function a(e,t){return Object(i["a"])(Object(i["a"])({},r),{},{onShowSizeChange:function(n,i){e.pageNo=n,e.pageSize=i,t()},onChange:function(n,i){e.pageNo=n,e.pageSize=i,t()}})}},1276:function(e,t,n){"use strict";var i=n("d784"),r=n("44e7"),a=n("825a"),c=n("1d80"),o=n("4840"),l=n("8aa5"),u=n("50c4"),s=n("14c3"),d=n("9263"),f=n("d039"),b=[].push,p=Math.min,h=4294967295,O=!f((function(){return!RegExp(h,"y")}));i("split",2,(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(c(this)),a=void 0===n?h:n>>>0;if(0===a)return[];if(void 0===e)return[i];if(!r(e))return t.call(i,e,a);var o,l,u,s=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,O=new RegExp(e.source,f+"g");while(o=d.call(O,i)){if(l=O.lastIndex,l>p&&(s.push(i.slice(p,o.index)),o.length>1&&o.index<i.length&&b.apply(s,o.slice(1)),u=o[0].length,p=l,s.length>=a))break;O.lastIndex===o.index&&O.lastIndex++}return p===i.length?!u&&O.test("")||s.push(""):s.push(i.slice(p)),s.length>a?s.slice(0,a):s}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=c(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r,n):i.call(String(r),t,n)},function(e,r){var c=n(i,e,this,r,i!==t);if(c.done)return c.value;var d=a(e),f=String(this),b=o(d,RegExp),j=d.unicode,m=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(O?"y":"g"),g=new b(O?d:"^(?:"+d.source+")",m),v=void 0===r?h:r>>>0;if(0===v)return[];if(0===f.length)return null===s(g,f)?[f]:[];var x=0,w=0,k=[];while(w<f.length){g.lastIndex=O?w:0;var C,y=s(g,O?f:f.slice(w));if(null===y||(C=p(u(g.lastIndex+(O?0:w)),f.length))===x)w=l(f,w,j);else{if(k.push(f.slice(x,w)),k.length===v)return k;for(var S=1;S<=y.length-1;S++)if(k.push(y[S]),k.length===v)return k;w=x=C}}return k.push(f.slice(x)),k}]}),!O)},"3b88":function(e,t,n){},"517e":function(e,t,n){"use strict";n("3b88")},dcb9:function(e,t,n){"use strict";n.r(t);var i=n("f2bf"),r=Object(i["cb"])("data-v-cd33ded2");Object(i["J"])("data-v-cd33ded2");var a={class:"mb10"},c=Object(i["m"])(" 添加 "),o={class:"box"},l={href:"#"},u=Object(i["n"])("a",null,"删除",-1);Object(i["H"])();var s=r((function(e,t,n,s,d,f){var b=Object(i["O"])("a-button"),p=Object(i["O"])("a-col"),h=Object(i["O"])("a-row"),O=Object(i["O"])("a-divider"),j=Object(i["O"])("a-popconfirm"),m=Object(i["O"])("a-card"),g=Object(i["O"])("page-layout"),v=Object(i["O"])("page-footer"),x=Object(i["O"])("Save");return Object(i["G"])(),Object(i["j"])("div",null,[Object(i["n"])(g,null,{default:r((function(){return[Object(i["n"])("div",a,[Object(i["n"])(h,null,{default:r((function(){return[Object(i["n"])(p,{span:8},{default:r((function(){return[Object(i["n"])(b,{onClick:f.openSaveBox,type:"primary"},{default:r((function(){return[c]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]),Object(i["n"])(O),Object(i["n"])(h,{type:"flex",gutter:16},{default:r((function(){return[(Object(i["G"])(!0),Object(i["j"])(i["b"],null,Object(i["M"])(d.data,(function(e,t){return Object(i["G"])(),Object(i["j"])(p,{key:t,span:6},{default:r((function(){return[Object(i["n"])("div",o,[Object(i["n"])(m,{title:e.fileRealName},{extra:r((function(){return[Object(i["n"])("a",l,[Object(i["n"])(j,{title:"是否删除这条数据",onConfirm:function(t){return f.del(e.uid)}},{default:r((function(){return[u]})),_:2},1032,["onConfirm"])])]})),default:r((function(){return[Object(i["n"])("p",null,[Object(i["n"])("video",{controls:"",style:{width:"100%",height:"150px"},src:e.internetUrl},null,8,["src"])])]})),_:2},1032,["title"])])]})),_:2},1024)})),128))]})),_:1})]})),_:1}),Object(i["n"])(v),Object(i["n"])(x,{ref:"save",onFetchList:f.fetch},null,8,["onFetchList"])])})),d=(n("3b18"),n("f64c")),f=Object(i["m"])(" 提交 "),b=Object(i["m"])(" 重置 ");function p(e,t,n,r,a,c){var o=Object(i["O"])("Upload"),l=Object(i["O"])("a-form-item"),u=Object(i["O"])("a-button"),s=Object(i["O"])("a-form"),d=Object(i["O"])("a-drawer");return a.visible?(Object(i["G"])(),Object(i["j"])(d,{key:0,title:"上传",placement:"right",width:"720",closable:!1,visible:a.visible,"onUpdate:visible":t[2]||(t[2]=function(e){return a.visible=e}),maskClosable:1},{default:Object(i["Z"])((function(){return[Object(i["n"])(s,{"label-col":a.labelCol,"wrapper-col":a.wrapperCol,ref:"ruleForm",model:a.form,rules:e.rules},{default:Object(i["Z"])((function(){return[Object(i["n"])(l,{label:"上传",name:"nickName"},{default:Object(i["Z"])((function(){return[Object(i["n"])(o,{onUpdateFList:c.onSubmit},null,8,["onUpdateFList"])]})),_:1}),Object(i["n"])(l,{"wrapper-col":{offset:3}},{default:Object(i["Z"])((function(){return[Object(i["n"])(u,{loading:a.loading,disabled:a.loading,type:"primary",onClick:c.onSubmit},{default:Object(i["Z"])((function(){return[f]})),_:1},8,["loading","disabled","onClick"]),Object(i["n"])(u,{style:{"margin-left":"10px"},onClick:t[1]||(t[1]=function(e){return c.resetForm("form")})},{default:Object(i["Z"])((function(){return[b]})),_:1})]})),_:1})]})),_:1},8,["label-col","wrapper-col","model","rules"])]})),_:1},8,["visible"])):Object(i["k"])("",!0)}n("96cf");var h=n("1da1"),O=(n("43b5"),n("ed08")),j={class:"ant-upload-drag-icon"},m=Object(i["n"])("p",{class:"ant-upload-text"}," 点击上传或拖拽文件到这里 ",-1),g=Object(i["n"])("p",{class:"ant-upload-hint"}," 支持拖拽 点击上传 ",-1);function v(e,t,n,r,a,c){var o=Object(i["O"])("inbox-outlined"),l=Object(i["O"])("a-upload-dragger");return Object(i["G"])(),Object(i["j"])(l,{fileList:e.fileList,"onUpdate:fileList":t[1]||(t[1]=function(t){return e.fileList=t}),name:"files",multiple:!0,action:"/reqApi/upload",onChange:c.handleChange,"before-upload":c.beforeUpload,headers:c.headers,accept:"video/*"},{default:Object(i["Z"])((function(){return[Object(i["n"])("p",j,[Object(i["n"])(o)]),m,g]})),_:1},8,["fileList","onChange","before-upload","headers"])}var x=n("4360"),w=n("6c02"),k={data:function(){return{}},computed:{headers:{cache:!1,get:function(){return{"clisoft-token":x["a"].getters["user/accessToken"]}}}},methods:{beforeUpload:function(e){"image/jpeg"===e.type||e.type;var t=e.size/1024/1024<10;return t||d["a"].error("超过10M"),t},handleChange:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){var r,a,c,o,l,u,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.fileList,a=void 0===r?[]:r,c=e.file,e.event,!Object(i["s"])(a)){n.next=11;break}if(o=c.status,l=void 0===o?"":o,"done"!=l){n.next=11;break}if(u=a[0].response.status,401!=u){n.next=10;break}return n.next=8,x["a"].dispatch("user/resetAll");case 8:s=Object(w["d"])(),s.push("/login");case 10:200==u&&t.$emit("updateFList");case 11:case"end":return n.stop()}}),n)})))()}}};k.render=v;var C=k,y={components:{Upload:C},emits:["fetchList"],data:function(){return{isEdit:!1,labelCol:{xs:4,sm:4,md:3,lg:4,xl:4,xxl:3},wrapperCol:{xs:20,sm:21,md:21,lg:21,xl:20,xxl:17},form:{uid:"",nickName:"",password:"",username:"",roleIds:[]},visible:!1,roleList:[],loading:!1}},methods:{show:function(e){if(this.form=this.$options.data().form,this.visible=!0,e){for(var t in this.isEdit=!0,this.form)for(var n in e)if(n&&t==n){this.form[t]=e[n];break}this.form.roleIds=Object(O["a"])(e.roleIds)}},onSubmit:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("fetchList"),e.visible=!1;case 2:case"end":return t.stop()}}),t)})))()},resetForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form";this[e]=this.$options.data()[e]}}};y.render=p;var S=y,_=n("01e6"),L=n("b775"),I=function(e,t){return L["a"].request({url:e,data:t,method:"delete"})},R=function(e,t){return L["a"].request({url:e,params:t,method:"get"})},U=[{dataIndex:"fileRealName",title:"文件名称"},{dataIndex:"fileSize",title:"文件大小"},{dataIndex:"fileType",title:"文件类型"},{dataIndex:"createTime",title:"创建时间"},{title:"操作",fixed:"right",width:150,slots:{customRender:"action"}}],F={components:{Save:S},data:function(){return{data:[],columns:U,loading:!1,form:{pageNo:1,pageSize:10,name:null,select:null,selects:[]},total:0,api:{listApi:"/fms/file/list",delApi:"/fms/file/delete"}}},created:function(){this.fetch()},computed:{pagination:function(){return Object(_["a"])(this.form,this.fetch)}},methods:{fetch:function(){var e=this;this.loading=!0,R(this.api.listApi,this.form).then((function(t){var n=t.data,i=n.records,r=n.total;e.data=i,e.total=r,e.loading=!1})).catch((function(){e.loading=!1}))},openSaveBox:function(){this.$refs.save.show()},edit:function(e){this.$refs.save.show(e)},del:function(e){var t=this;I(this.api.delApi,{uid:e}).then((function(){t.fetch(),d["a"].success({content:"操作成功",key:"save"})}))}}};n("517e");F.render=s,F.__scopeId="data-v-cd33ded2";t["default"]=F},ed08:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("ac1f"),n("1276");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return void 0!=e&&null!=e&&""!=e&&e&&"string"==typeof e?e.split(","):[]}}}]);